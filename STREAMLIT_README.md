# ⚽ Soccer Analytics Streamlit Dashboard

A comprehensive web application for visualizing and analyzing soccer match data extracted from your `main.py` script.

## 🚀 Quick Start

### 1. Install Dependencies
```bash
pip install -r streamlit_requirements.txt
```

### 2. Run the Application
```bash
streamlit run streamlit_soccer_app.py
```

### 3. Upload Your Analytics Data
- Generate JSON data using your `main.py` script in RADAR mode:
  ```bash
  python main.py --source_video_path your_video.mp4 --target_video_path output.mp4 --device cuda --mode RADAR
  ```
- Upload the generated `*_analytics.json` file in the sidebar

## 📊 Features

### 🏟️ Field View Tab
- **Interactive Soccer Field**: Visual representation of player positions at any frame
- **Timeline Scrubbing**: Navigate through the match frame by frame
- **Team Identification**: Color-coded players (Blue: Team 0, Red: Team 1, Yellow: Referees)
- **Ball Possession Timeline**: Track possession changes over time
- **Zone Occupancy**: See how many players occupy different field zones

### 📍 Player Heatmap Tab
- **Individual Player Analysis**: Select any tracked player
- **Movement Heatmaps**: Visualize where players spend most time on field
- **Player Statistics**: Frames tracked, team assignment, role
- **Trajectory Analysis**: Movement patterns throughout the match

### ⚽ Ball Analysis Tab
- **Ball Detection Statistics**: Detection rate, frames tracked
- **Velocity Analysis**: Ball speed over time
- **Trajectory Visualization**: Ball movement patterns
- **Possession Analytics**: Which team controls the ball

### 📊 Zone Analysis Tab
- **Field Zone Definitions**: Defensive, middle, attacking thirds
- **Occupancy Metrics**: Player distribution across zones
- **Tactical Positioning**: Team formation insights

### 📋 Raw Data Tab
- **JSON Explorer**: Browse the complete analytics dataset
- **Data Validation**: Ensure data integrity
- **Schema Inspection**: Understand data structure

## 📈 Dashboard Sections

### Match Overview
- Video duration and frame count
- Detection quality metrics (player, ball, field)
- Processing statistics and resolution info

### Team Statistics
- Side-by-side team comparison
- Possession percentages
- Distance covered metrics
- Pass completion (when available)

### Interactive Controls
- **Frame Slider**: Scrub through match timeline
- **Player Selector**: Choose individual players for analysis
- **Data Section Explorer**: Navigate different data categories

## 🎯 Data Schema Support

The app supports the complete JSON schema from `DATA_EXTRACTION_SPEC.md`:

```json
{
    "match_metadata": {...},
    "raw_detections": {
        "players": [...],
        "ball": [...],
        "pitch": [...]
    },
    "tracking_data": {
        "players": {...},
        "ball": {...}
    },
    "spatial_analytics": {...},
    "possession_analytics": {...},
    "quality_metrics": {...},
    "summary_statistics": {...}
}
```

## 🛠️ Technical Details

### Dependencies
- **Streamlit**: Web app framework
- **Plotly**: Interactive visualizations
- **Pandas**: Data manipulation
- **NumPy**: Numerical computations

### Field Dimensions
- Standard soccer field: 120m x 80m
- Real-world coordinate conversion from cm to meters
- Accurate penalty boxes, goal areas, and center circle

### Color Coding
- **Blue**: Team 0 players
- **Red**: Team 1 players  
- **Yellow**: Referees
- **Gray**: Unclassified/unknown

## 🎮 Usage Tips

1. **Timeline Navigation**: Use the frame slider to see player movements over time
2. **Player Focus**: Select specific players to see their individual heatmaps
3. **Zoom & Pan**: Use Plotly controls to zoom into specific field areas
4. **Export Data**: Download charts as PNG from Plotly menu
5. **Performance**: Large JSON files may take time to load initially

## 🔧 Troubleshooting

### Common Issues

**File Upload Fails**
- Ensure JSON file is valid (generated by `main.py` RADAR mode)
- Check file size (large files may take time)

**Missing Visualizations**
- Verify JSON contains required data sections
- Check console for error messages

**Slow Performance**
- Large datasets may impact responsiveness
- Consider processing shorter video segments

**Coordinate Issues**
- Ensure field coordinates are in centimeters (cm)
- App converts to meters automatically

## 📝 Extending the App

### Adding New Visualizations
1. Create new function in `streamlit_soccer_app.py`
2. Add to appropriate tab or create new tab
3. Use existing field layout functions for consistency

### Custom Analytics
1. Extract additional data in `main.py` DataCollector
2. Update JSON schema in specification
3. Add visualization functions in Streamlit app

### Performance Optimization
1. Implement data caching with `@st.cache_data`
2. Lazy load heavy computations
3. Use data sampling for large datasets

## 🎯 Future Enhancements

- [ ] Real-time video synchronization
- [ ] Formation change detection
- [ ] Pass network visualization
- [ ] Tactical event annotations
- [ ] Multi-match comparison
- [ ] Advanced filtering options
- [ ] 3D trajectory visualization
- [ ] Player performance rankings

## 📞 Support

For issues or questions:
1. Check the JSON schema in `DATA_EXTRACTION_SPEC.md`
2. Verify data generation with `main.py` RADAR mode
3. Review console output for error messages

Happy analyzing! ⚽📊 